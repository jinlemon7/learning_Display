- 组合
- 继承

# 组合语法：将对象引用放在新类中
  非基本类型：对象引用放新类。  
  基本类型：直接定义。  

  引用的Java默认初始化为null，编译器不会为每个引用都创建一个对象（减少开销）
  1. 定义时初始化            //构造器之前
  2. 构造器中初始化
  3. 实例初始化              //对于实例变量而言，方法之前
  4. 实际使用之前初始化      //延迟初始化

# 继承：entends
  ```mermaid
  graph TD;
  子类 --> 基类;
  ```
  创建一个类时，总是在继承（隐式继承根类Object）  
  Object根类的成员：  
  - equals()
  - hashCode()
  - toString()
  - getClass()
  - notify()
  - notifyAll()
  - wait()

  继承获得基类所有字段和方法。  
  成员访问控制一般规则：  
  1. 字段都是private
  2. 方法都是public
  3. 使用protected动态调整

  子类构造器中调用父类构造器不能简单调用A()       //产生递归调用  
  要使用super关键字：`super.A()`  
  子类可以重写来修改基类的方法，也可以创建新方法。  

## 初始化基类
  创建子类对象时，里面包含了一个基类的子对象subobject  
  与基类对象一样，只是被包裹在子类对象中。  
  
  所以正确初始化基类很重要：调用基类构造器初始化，它具有基类初始化的全部信息和权限  
  Java会自动在子类构造器中插入对基类构造器的调用（隐式），满足条件：  
  基类有无参构造器或没有任何构造器，子类新建有参/无参构造器均会隐式插入super()来调用父类的无参构造器  
  Java会自动在子类构造器中插入时对基类构造器的调用（隐式），一种情况除外，见下面的#带参数的构造器。  

## 带参数的构造器
  若基类只有有参构造器并且子类要创建有参构造器，则必须使用super关键字和参数列表显式调用基类构造器。  
  PS：构造器的super调用要在第1行！  
  否则编译器报错。  

# 委托
  Java虽然没有提供直接支持，但除了组合和继承，还有第三种关系——委托。  
  既将成员对象放在类中（类似组合），又在新类里公开对象的所有方法（类似继承）。  
  ```java
  public class B{
    private A a = new A();
    public b(){...}
    public void f1(int v){         //委托方法
      a.f1(v);                     //方法被转发到了内部的a对象，这里的接口与继承得到的是相同的，但是可以更好地控制委托
    }                              //例如仅提供a对象的部分方法
    public void f2(int v){
      a.f2(v);
    }
  }
  ```

# 组合与继承相结合
  客户程序员经常用到组合和继承，将类分离清晰，轻松复用它们。（最多只需要导入一个包）  

## 确保正确的清理
  虽然有GC，但是如果要显式定义清理活动，要将清理活动放在finally字句里，预防异常处理。  
  这种清理活动在处理非内存事物时很有必要。  
  PS：Object的finalize()方法已废弃，不要使用和重写。  


  
  
  



















