# 关于 GitHub Codespaces 中的源代码管理
  您可以直接在代码空间内执行所需的所有 Git 操作。 例如，可以从远程存储库获取更改、切换分支、创建新分支、提交和推送更改以及创建拉取请求。   
  您可以使用代码空间内的集成终端输入 Git 命令，也可以单击图标和菜单选项以完成所有最常见的 Git 任务。  
  本指南解释如何使用图形用户界面来控制源代码。  

  Visual Studio Code Web 客户端中的源代码管理使用与 Visual Studio Code 桌面应用程序相同的工作流。  

  使用 GitHub Codespaces 更新文件的典型工作流程将是：  
  - 从 GitHub 上仓库的默认分支，创建代码空间。
  - 在代码空间中，创建一个新的分支来操作。
  - 进行更改并保存。
  - 提交更改。
  - 提出拉取请求。

  > [!NOTE]
  > 默认情况下，GitHub Codespaces 使用 HTTPS 协议在远程存储库中传入和传出数据，
  > 并使用配置了对从中创建 codespace 的存储库的读取和写入访问权限的 `GITHUB_TOKEN` 进行身份验证。
  > 如果身份验证出现问题，请参阅 [排查存储库身份验证问题](https://docs.github.com/zh/codespaces/troubleshooting/troubleshooting-authentication-to-a-repository)。

# 关于自动创建分支
  若要为只有读取访问权限的存储库创建 codespace，必须具有对存储库创建分支的权限。  

  在创建 codespace 前，无需创建存储库分支。 例如，可以从存储库创建 codespace 来查看项目并进行实验性更改，然后删除不再需要的 codespace。  

  如果从 codespace 进行提交，或者推送新分支，GitHub Codespaces 会在帐户下创建存储库的分支并将其链接到 codespace，  
  或将 codespace 链接到现有分支（如果已有存储库分支）。 然后，可以将更改推送到分支并创建拉取请求，以向上游存储库提出更改。  

  如果从命令行进行提交，将看到一条提示，询问是否要继续将 codespace 链接到新的或现有的分支。  
  输入 y 以继续。 如果从 VS Code 中的源代码管理视图提交更改，则 codespace 会自动链接到分支，而系统不会提示。  

  > [!NOTE]
  > - 如果删除分支存储库，则会删除任何链接到该分支的 codespace，即使最初是从上游存储库创建的 codespace 也是如此。  
  > - 如果从命令行进行提交并通过输入 n 来拒绝新分支，则应从命令行而不是从 VS Code 的源代码管理视图推送更改。  
  > 如果使用源代码管理视图，VS Code 仍会尝试在推送时为你创建分叉。  

  当 GitHub Codespaces 创建分支或将 codespace 链接到现有分支时，会发生以下情况  
  - 与 codespace 关联的访问令牌将更新为包括对分支的 read 和 write 权限，以及对上游存储库的 read 权限。
  - 在 Git 设置中，将上游存储库重新命名为 upstream，分支将添加为名为 origin 的新远程存储库。

  默认情况下，从编辑器用户界面访问的源代码管理命令（如 VS Code 中的“同步更改”按钮）以分支为目标。   
  如果使用的是命令行，则可使用 origin 引用分支和使用 upstream 引用上游存储库。   
  例如，可以从上游存储库提取更改，以确保 codespace 与项目的最新更改保持同步。  
  `git fetch upstream`  
  进行一些更改后，可以将更改推送到分支的功能分支。  
  `git push origin my-feature-branch`  

# 发布从模板创建的 Codespace
  详见 [从 VS Code 发布](https://github.com/jinlemon7/learning_Display/blob/Edit/CI%20%26%20CD/Git和Github/GitHub%20Codespaces文档/在代码空间中开发/通过模板创建%20codespace.md#从-vs-code-发布)。  

# 创建或切换分支
  1. 如果当前分支未显示在状态栏中，请在 codespace 的底部右键单击状态栏，然后选择“源代码管理”。
  2. 单击状态栏中的分支名称。
     <img width="924" height="266" alt="image" src="https://github.com/user-attachments/assets/ca5bad2e-2603-4ec0-b140-a218d141aca9" />

  3. 在下拉菜单中，单击要切换到的分支或输入新分支的名称，然后单击“创建新分支”。
     <img width="1248" height="402" alt="image" src="https://github.com/user-attachments/assets/6a5eaa30-87bc-4a86-b0b4-6c08d75407c8" />

> [!TIP]  
> 如果有人最近在远程存储库上更改了文件，则在你切换到的分支中，只有将更改拉取到 codespace 中之后，你才能看到这些更改。  

# 提交更改
  1. 在活动栏中，单击“源代码管理”视图。
     <img width="916" height="478" alt="image" src="https://github.com/user-attachments/assets/a19a5fc8-8872-43d0-9b6b-c09863fbdb14" />

  2. 若要暂存更改，请单击已更改文件旁边的 ，如果你更改了多个文件并希望全部暂存，请单击“更改”旁边的按钮。
     <img width="918" height="378" alt="image" src="https://github.com/user-attachments/assets/e0530b1c-484b-4d53-a2fb-72049a43a910" />

  3. 在文本框中，键入提交消息，描述你所做的更改。
     <img width="922" height="410" alt="image" src="https://github.com/user-attachments/assets/cd9c5ba9-ff94-42e8-9e54-e3751d6aeae1" />

  4. 单击“提交”按钮右侧的向下箭头，然后从下拉菜单中选择“提交和推送”。
     <img width="1128" height="486" alt="image" src="https://github.com/user-attachments/assets/e4e8e5f5-d19c-4039-856d-b27fddea8afe" />

# 从远程仓库拉取更改
  您可以随时将远程仓库的更改拉取到您的代码空间。  
  1. 在活动栏中，单击“源代码管理”视图。
     <img width="916" height="478" alt="image" src="https://github.com/user-attachments/assets/d35dde7c-ca65-47f5-bdb2-5461049d347b" />

  2. 在边栏顶部，单击 。
     <img width="918" height="360" alt="image" src="https://github.com/user-attachments/assets/8e11756d-9f6c-40e6-91bc-30f1a28b3fce" />

  3. 在下拉菜单中，单击“拉取”。
     如果自创建代码空间以来开发容器配置已更改，则可以通过为代码空间重建容器来应用更改。

# 设置代码空间以自动获取新更改
  您可以设置代码空间，以自动获取对远程仓库所做的任何新提交的详细信息。 这允许您查看仓库的本地副本是否过时，如果是，您可以选择拉取新的更改。  

  如果获取操作检测到远程仓库上的新更改，您将在状态栏中看到新提交的数量。 然后，您可以将更改拉取到本地副本。  

  1. 单击活动栏底部的“管理”按钮。
     <img width="710" height="260" alt="image" src="https://github.com/user-attachments/assets/62cde9e5-4432-49a2-a629-b23e92a3b4d9" />

  2. 在菜单中，单击“设置”。
  3. 在设置页上，搜索：`autofetch`。
     <img width="1392" height="452" alt="image" src="https://github.com/user-attachments/assets/f4e5dc1b-bca9-4bd7-8975-c52918d86e52" />

  4. 若要获取为当前存储库注册的所有远程更新的详细信息，请将 Git: Autofetch 设置为 `all`。
     <img width="964" height="308" alt="image" src="https://github.com/user-attachments/assets/78c914f9-5016-44c4-b78b-079ff03e0860" />

  5. 如果要更改自动获取的间隔秒数，请编辑 Git: Autofetch Period 的值。

# 提出拉取请求
  1. 将更改提交到存储库的本地副本后，单击“源代码管理”边栏顶部的拉取请求图标。
     <img width="702" height="152" alt="image" src="https://github.com/user-attachments/assets/fa07df0c-2e2f-4d18-b441-710c9dd7565f" />

  2. 检查作为合并来源的本地分支和仓库以及作为合并目标的远程分支和仓库是否正确。 然后为拉取请求提供标题和描述。
     <img width="702" height="1136" alt="image" src="https://github.com/user-attachments/assets/71c31070-c4b4-4059-b752-b67176b9ceb1" />

  3. 单击“创建”。

# 将更改推送到远程仓库
  可以推送保存并提交的更改。 这将应用这些更改到远程仓库上的上游分支。  
  如果您尚未准备好创建拉取请求，或者希望在 GitHub 上创建拉取请求，则可能需要这样做。  

  1. 在边栏顶部，单击 。
     <img width="716" height="146" alt="image" src="https://github.com/user-attachments/assets/ddd378a3-556f-4288-a382-3886e46be104" />

  2. 在下拉菜单中，单击“推送”。
